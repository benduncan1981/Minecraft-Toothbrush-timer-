<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Oscar's Brushing Adventure</title>
<style>
  * { box-sizing: border-box; margin:0; padding:0; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to top, #4caf50 0%, #87ceeb 80%);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    color:#fff;
  }

  header {
    font-size:28px;
    font-weight:700;
    margin-bottom:20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
  }

  #landscape {
    width:90%;
    max-width:400px;
    height:200px;
    background:linear-gradient(to top, #3e8e41 0%, #6fae6f 50%, #87ceeb 100%);
    border-radius:20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    position:relative;
    margin-bottom:20px;
    overflow:hidden;
    border:3px solid #2c6f2c;
  }
  .terrain { position:absolute; bottom:0; width:100%; height:50px; background:#8b4513; border-top:2px solid #5d2b0a; }
  .grass { position:absolute; bottom:50px; width:100%; height:20px; background:#4caf50; border-top:2px solid #388e3c; }

  #timerCard {
    background:rgba(0,0,0,0.6);
    border-radius:16px;
    padding:20px;
    text-align:center;
    margin-bottom:20px;
    width:90%;
    max-width:320px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.4);
    border:3px solid #7cfc00;
  }
  #timer { font-size:48px; font-weight:700; margin-bottom:12px; }

  #xpBar {
    width:100%;
    height:20px;
    background:#222;
    border-radius:10px;
    overflow:hidden;
    border:2px solid #555;
  }
  #xpFill {
    width:0%;
    height:100%;
    background:linear-gradient(to right, #7CFC00, #00FFAA);
    transition:width 0.1s linear;
  }

  #hand {
    width:120px;
    height:120px;
    margin-bottom:20px;
    transition: transform 0.2s ease;
  }

  button {
    padding:12px 20px;
    font-size:18px;
    font-weight:700;
    border:none;
    border-radius:12px;
    cursor:pointer;
    background:#ff9800;
    color:#fff;
    box-shadow:0 4px 12px rgba(0,0,0,0.3);
    margin:4px;
    transition: transform 0.1s ease, box-shadow 0.1s ease;
    border:2px solid #ffa726;
  }
  button:active { transform: translateY(2px); box-shadow:0 2px 6px rgba(0,0,0,0.3); }

  #reward {
    display:none;
    background:rgba(0,0,0,0.7);
    padding:20px;
    border-radius:16px;
    text-align:center;
    box-shadow:0 8px 20px rgba(0,0,0,0.4);
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:80%;
    max-width:360px;
    border:3px solid #FFD700;
  }
  #reward h2 { font-size:28px; color:#FFD700; margin-bottom:12px; }
  #reward p { font-size:18px; margin-bottom:12px; }

  canvas { position:absolute; pointer-events:none; top:0; left:0; width:100%; height:100%; }
</style>
</head>
<body>

<header>ðŸª¥ Oscar's Brushing Adventure</header>

<div id="landscape">
  <div class="terrain"></div>
  <div class="grass"></div>
</div>

<div id="timerCard">
  <div id="timer">2:00</div>
  <div id="xpBar"><div id="xpFill"></div></div>
</div>

<img id="hand" src="" alt="Animated brushing hand">

<div>
  <button id="startBtn">Start</button>
  <button id="pauseBtn" style="display:none;">Pause</button>
  <button id="resetBtn" style="display:none;">Reset</button>
</div>

<div id="reward">
  <h2>ðŸŽ‰ Super Brusher! ðŸŽ‰</h2>
  <p>Two minutes complete! Amazing job, Oscar!</p>
  <button id="closeReward">Close</button>
</div>

<canvas id="confetti"></canvas>

<script>
const TOTAL_TIME = 120;
let elapsed = 0;
let running = false;
let timerInterval = null;

const timerEl = document.getElementById('timer');
const xpFill = document.getElementById('xpFill');
const startBtn = document.getElementById('startBtn');
const pauseBtn = document.getElementById('pauseBtn');
const resetBtn = document.getElementById('resetBtn');
const reward = document.getElementById('reward');
const closeReward = document.getElementById('closeReward');
const handImg = document.getElementById('hand');
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');

function resizeCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// Hand sprite
function makeHandSprite(){
  const c = document.createElement('canvas');
  c.width=64; c.height=64;
  const ctx=c.getContext('2d');
  ctx.fillStyle='#C2A476'; ctx.fillRect(20,40,24,6);
  ctx.fillStyle='#fff'; ctx.fillRect(24,32,16,8);
  ctx.fillStyle='#F1C27D'; ctx.fillRect(10,34,16,12);
  return c.toDataURL();
}
handImg.src = makeHandSprite();

let brushPhase=0;
function animateHand(){ brushPhase+=0.1; handImg.style.transform=`translateX(${Math.sin(brushPhase)*15}px)`; if(running) requestAnimationFrame(animateHand); }

function formatTime(sec){ const m=Math.floor(sec/60); const s=sec%60; return m + ':' + (s<10?'0':'') + s; }

function updateTimer(){
  elapsed++;
  timerEl.textContent = formatTime(TOTAL_TIME - elapsed);
  xpFill.style.width = (elapsed/TOTAL_TIME*100)+'%';
  if(elapsed>=TOTAL_TIME){ stopBrushing(); showReward(); startConfetti(); }
}

function startBrushing(){
  if(running) return;
  running=true; elapsed=0;
  timerEl.textContent = formatTime(TOTAL_TIME);
  xpFill.style.width='0%';
  reward.style.display='none';
  startBtn.style.display='none'; pauseBtn.style.display='inline-block'; resetBtn.style.display='inline-block';
  timerInterval=setInterval(updateTimer,1000);
  animateHand();
}

function pauseBrushing(){ running=false; clearInterval(timerInterval); startBtn.style.display='inline-block'; pauseBtn.style.display='none'; }

function resetBrushing(){ running=false; clearInterval(timerInterval); elapsed=0; timerEl.textContent=formatTime(TOTAL_TIME); xpFill.style.width='0%'; startBtn.style.display='inline-block'; pauseBtn.style.display='none'; resetBtn.style.display='none'; }

function stopBrushing(){ running=false; clearInterval(timerInterval); pauseBtn.style.display='none'; }

startBtn.addEventListener('click',startBrushing);
pauseBtn.addEventListener('click',pauseBrushing);
resetBtn.addEventListener('click',resetBrushing);
closeReward.addEventListener('click',()=>{ reward.style.display='none'; });

/* ---------- Confetti ---------- */
let confettiParticles=[];
function startConfetti(){
  confettiParticles=[];
  for(let i=0;i<150;i++){
    confettiParticles.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height-100,
      r:Math.random()*6+4,
      d:Math.random()*30,
      color:`hsl(${Math.random()*360}, 100%, 60%)`,
      tilt:Math.random()*10-10,
      tiltAngleIncrement:Math.random()*0.07+0.05
    });
  }
  requestAnimationFrame(drawConfetti);
}

function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<confettiParticles.length;i++){
    let p=confettiParticles[i];
    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.moveTo(p.x + p.tilt, p.y);
    ctx.lineTo(p.x + p.tilt + p.r/2, p.y + p.r);
    ctx.lineTo(p.x + p.tilt - p.r/2, p.y + p.r);
    ctx.closePath();
    ctx.fill();
    p.tilt+=p.tiltAngleIncrement;
    p.y+=Math.cos(p.d)+3;
    if(p.y>canvas.height){ p.y=-10; p.x=Math.random()*canvas.width; }
  }
  requestAnimationFrame(drawConfetti);
}
</script>
</body>
</html>
