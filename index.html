<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Oscar's Minecraft Timer</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    background: #87CEEB;
    font-family: 'Press Start 2P', monospace;
    overflow: hidden;
  }
  #canvas {
    display: block;
    width: 100vw;
    height: 100vh;
    image-rendering: pixelated;
    background: linear-gradient(to bottom, #87CEEB 0%, #4CAF50 70%, #8B4513 100%);
  }
  .hud {
    position: fixed;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 10;
  }
  .panel {
    background: #222;
    border: 3px solid #555;
    padding: 12px;
    color: #fff;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  button {
    font-family: 'Press Start 2P', monospace;
    background: #555;
    border: 2px solid #999;
    color: #fff;
    padding: 8px 12px;
    cursor: pointer;
    text-transform: uppercase;
  }
  button:active {
    transform: translateY(1px);
  }
  #xpBar {
    width: 240px;
    height: 16px;
    background: #222;
    border: 2px solid #555;
  }
  #xpFill {
    height: 100%;
    width: 0%;
    background: #7CFC00;
  }
  #rewardScreen {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    z-index: 20;
    color: #fff;
  }
  #rewardScreen h1 {
    font-size: 28px;
    margin-bottom: 12px;
  }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<div class="hud">
  <div class="panel">
    <div>Time: <span id="timer">2:00</span></div>
  </div>
  <div class="panel">
    <div>XP</div>
    <div id="xpBar"><div id="xpFill"></div></div>
  </div>
  <div class="panel">
    <button id="startBtn">Start</button>
    <button id="pauseBtn" style="display:none">Pause</button>
    <button id="resetBtn">Reset</button>
  </div>
</div>

<div id="rewardScreen">
  <h1>Awesome Brushing!</h1>
  <canvas id="confetti" width="300" height="300" style="background:transparent;"></canvas>
  <button id="playAgainBtn">Play Again</button>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

// Timer
const TOTAL_TIME = 120;
let elapsed = 0;
let running = false;
let interval = null;

// HUD
const timerEl = document.getElementById('timer');
const xpFill = document.getElementById('xpFill');
const startBtn = document.getElementById('startBtn');
const pauseBtn = document.getElementById('pauseBtn');
const resetBtn = document.getElementById('resetBtn');

// Reward
const rewardScreen = document.getElementById('rewardScreen');
const playAgainBtn = document.getElementById('playAgainBtn');
const confettiCanvas = document.getElementById('confetti');
const cctx = confettiCanvas.getContext('2d');

// Landscape blocks
function drawLandscape() {
  const blockSize = 16;
  for(let y = height*0.7; y < height; y += blockSize){
    for(let x = 0; x < width; x += blockSize){
      ctx.fillStyle = '#8B4513';
      ctx.fillRect(x, y, blockSize, blockSize);
    }
  }
  for(let y = height*0.5; y < height*0.7; y += blockSize){
    for(let x = 0; x < width; x += blockSize){
      ctx.fillStyle = '#4CAF50';
      ctx.fillRect(x, y, blockSize, blockSize);
    }
  }
}

// Hand sprite
function drawHand() {
  ctx.fillStyle = '#F1C27D';
  ctx.fillRect(width/2 - 12, height - 80, 24, 40);
  ctx.fillStyle = '#fff';
  ctx.fillRect(width/2 - 12, height - 90, 24, 10);
}

// Update timer
function updateTimer(){
  elapsed += 1;
  if(elapsed > TOTAL_TIME){
    clearInterval(interval);
    running = false;
    showReward();
  }
  const remain = TOTAL_TIME - elapsed;
  const m = Math.floor(remain/60);
  const s = remain%60;
  timerEl.textContent = `${m}:${s<10?'0':''}${s}`;
  xpFill.style.width = (elapsed/TOTAL_TIME*100)+'%';
}

// Render loop
function render(){
  ctx.clearRect(0,0,width,height);
  drawLandscape();
  drawHand();
  requestAnimationFrame(render);
}
render();

// Controls
startBtn.onclick = ()=>{
  if(!running){
    running = true;
    startBtn.style.display='none';
    pauseBtn.style.display='inline-block';
    interval = setInterval(updateTimer,1000);
  }
};
pauseBtn.onclick = ()=>{
  if(running){
    running = false;
    pauseBtn.style.display='none';
    startBtn.style.display='inline-block';
    clearInterval(interval);
  }
};
resetBtn.onclick = ()=>{
  running = false;
  clearInterval(interval);
  elapsed = 0;
  timerEl.textContent = '2:00';
  xpFill.style.width = '0%';
  startBtn.style.display='inline-block';
  pauseBtn.style.display='none';
};

// Reward screen
function showReward(){
  rewardScreen.style.display='flex';
  startConfetti();
}
playAgainBtn.onclick = ()=>{
  rewardScreen.style.display='none';
  elapsed = 0;
  timerEl.textContent = '2:00';
  xpFill.style.width = '0%';
  running = false;
};

// Confetti
let confettiParticles = [];
function startConfetti(){
  confettiParticles = [];
  for(let i=0;i<150;i++){
    confettiParticles.push({
      x: Math.random()*confettiCanvas.width,
      y: Math.random()*confettiCanvas.height,
      vx: (Math.random()-0.5)*4,
      vy: Math.random()*-4-2,
      size: Math.random()*4+2,
      color: ['#7CFC00','#55f','#FFEE00','#FF5555'][Math.floor(Math.random()*4)]
    });
  }
  requestAnimationFrame(drawConfetti);
}
function drawConfetti(){
  cctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  for(let p of confettiParticles){
    cctx.fillStyle = p.color;
    cctx.fillRect(p.x,p.y,p.size,p.size);
    p.x += p.vx;
    p.y += p.vy;
    if(p.y < 0) p.y = confettiCanvas.height;
  }
  if(rewardScreen.style.display==='flex'){
    requestAnimationFrame(drawConfetti);
  }
}

// Resize
window.addEventListener('resize', ()=>{
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
});
</script>
</body>
</html>
