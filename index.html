<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Oscar's Pixel Brushing Quest</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root{
  --xp:#ff69b4;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}

body{
  margin:0;
  font-family:'Press Start 2P', monospace;
  color:white;
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#5fbf3f;
}

/* BIOMES */

body.plains{background:#5fbf3f;}
body.forest{background:#3f9f2f;}
body.nether{background:#330000;}
body.end{background:#1a001f;}

/* SKY */
.sky{
  position:absolute;
  top:0;
  width:100%;
  height:45%;
  background:#7ec0ee;
}

body.forest .sky{background:#6fb0dd;}
body.nether .sky{background:#5b0000;}
body.end .sky{background:#100014;}

/* SUN */
.sun{
  position:absolute;
  top:30px;
  right:50px;
  width:64px;
  height:64px;
  image-rendering:pixelated;
  background:
    linear-gradient(0deg,#ffd000 50%,#ffea00 50%);
  box-shadow:0 0 0 8px #ffcc00;
}

/* CLOUD */
.cloud{
  position:absolute;
  width:96px;
  height:32px;
  background:white;
  animation:cloudMove 60s linear infinite;
}
@keyframes cloudMove{from{left:-150px;}to{left:110%;}}

/* TREE */
.tree{
  position:absolute;
  bottom:0;
  width:48px;
  height:96px;
}
.tree .trunk{
  position:absolute;
  bottom:0;
  left:18px;
  width:12px;
  height:40px;
  background:#5e3716;
}
.tree .leaves{
  position:absolute;
  bottom:40px;
  width:48px;
  height:48px;
  background:#1f7f1f;
}

/* ANIMAL */
.animal{
  position:absolute;
  bottom:10px;
  width:32px;
  height:20px;
  background:#fff;
  animation:animalMove 25s linear infinite;
}
@keyframes animalMove{from{left:-60px;}to{left:110%;}}

/* NETHER LAVA GLOW */
body.nether::after{
  content:"";
  position:absolute;
  bottom:0;
  width:100%;
  height:60px;
  background:linear-gradient(#ff3300,#990000);
}

/* END PILLARS */
.pillar{
  position:absolute;
  bottom:0;
  width:40px;
  height:140px;
  background:#111;
}
.pillar::after{
  content:"";
  position:absolute;
  top:-20px;
  left:5px;
  width:30px;
  height:20px;
  background:#551a8b;
}

/* ENDER DRAGON */
.dragon{
  position:absolute;
  top:80px;
  width:120px;
  height:40px;
  background:#2a0033;
  animation:dragonFly 10s linear infinite;
}
@keyframes dragonFly{from{left:-150px;}to{left:110%;}}

/* ARROWS */
.arrow{
  position:absolute;
  bottom:0;
  width:4px;
  height:40px;
  background:#ccc;
  animation:arrowShoot 2s linear forwards;
}
@keyframes arrowShoot{
  to{transform:translateY(-500px);opacity:0;}
}

/* UI unchanged */

.container{
  position:relative;
  text-align:center;
  width:90%;
  max-width:480px;
  background:#888;
  border:8px solid black;
  padding:20px;
  box-shadow:0 0 0 8px #333;
  z-index:10;
}

h1{font-size:14px;margin-bottom:15px;text-shadow:4px 4px black;}
.timer{font-size:36px;margin:20px 0;text-shadow:5px 5px black;}
.zone{font-size:10px;margin-bottom:10px;color:#ff8cf0;}

button{
  font-family:'Press Start 2P', monospace;
  background:#7a4b1f;
  border:6px solid black;
  color:white;
  padding:14px;
  width:100%;
  font-size:10px;
  margin-top:15px;
  box-shadow:4px 4px #000;
}
button:active{transform:translate(4px,4px);box-shadow:none;}

.xp-bar{width:100%;height:18px;background:#222;border:4px solid black;margin-top:15px;}
.xp-fill{
  height:100%;
  width:0%;
  background:#ff69b4;
  transition:width 0.5s linear;
}

.orb{
  position:absolute;
  width:8px;
  height:8px;
  background:#ff69b4;
  animation:orbRise 2s linear forwards;
}
@keyframes orbRise{to{transform:translateY(-120px);opacity:0;}}

.warning{animation:flash 0.5s infinite;}
@keyframes flash{0%,100%{filter:none;}50%{filter:brightness(1.8);}}

.achievement{
  position:absolute;
  top:20%;
  left:50%;
  transform:translateX(-50%);
  background:black;
  border:6px solid gold;
  padding:20px;
  display:none;
  text-align:center;
  animation:pop 0.4s ease-out forwards;
  z-index:20;
}
@keyframes pop{from{transform:translateX(-50%) scale(0.5);}to{transform:translateX(-50%) scale(1);}}
</style>
</head>
<body class="plains">

<div class="sky"></div>
<div id="world"></div>

<div class="container">
  <h1>Oscar's Tooth Quest</h1>
  <div class="timer" id="timer">02:00</div>
  <div class="zone" id="zone">Tap Start To Begin</div>
  <button id="startBtn">START BRUSHING</button>
  <button id="pauseBtn" style="display:none;">PAUSE</button>
  <button id="resetBtn" style="display:none;">RESTART QUEST</button>
  <div class="xp-bar"><div class="xp-fill" id="xp"></div></div>
</div>

<div class="achievement" id="achievement">
  TREASURE UNLOCKED<br><br>
  SUPER CLEAN TEETH<br><br>
  Oscar Level Up!
</div>

<script>
let timeLeft=120;
let interval;
let isPaused=false;

const world=document.getElementById("world");
const timer=document.getElementById("timer");
const zone=document.getElementById("zone");
const xp=document.getElementById("xp");
const achievement=document.getElementById("achievement");
const startBtn=document.getElementById("startBtn");
const pauseBtn=document.getElementById("pauseBtn");
const resetBtn=document.getElementById("resetBtn");

const zones=["Top Left Zone","Top Right Zone","Bottom Left Zone","Bottom Right Zone"];
const biomes=["plains","forest","nether","end"];

const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
function beep(){
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  o.connect(g);g.connect(audioCtx.destination);
  o.type="square";o.frequency.value=800;
  g.gain.setValueAtTime(0.1,audioCtx.currentTime);
  o.start();o.stop(audioCtx.currentTime+0.08);
}

function buildBiome(name){
  world.innerHTML="";
  if(name==="plains"||name==="forest"){
    const sun=document.createElement("div");
    sun.className="sun";
    world.appendChild(sun);

    const cloud=document.createElement("div");
    cloud.className="cloud";
    cloud.style.top="50px";
    world.appendChild(cloud);

    for(let i=0;i<2;i++){
      const tree=document.createElement("div");
      tree.className="tree";
      tree.style.left=(10+i*60)+"%";
      tree.innerHTML='<div class="trunk"></div><div class="leaves"></div>';
      world.appendChild(tree);
    }

    const animal=document.createElement("div");
    animal.className="animal";
    world.appendChild(animal);
  }

  if(name==="end"){
    for(let i=0;i<3;i++){
      const p=document.createElement("div");
      p.className="pillar";
      p.style.left=(15+i*30)+"%";
      world.appendChild(p);
    }
    const dragon=document.createElement("div");
    dragon.className="dragon";
    world.appendChild(dragon);
  }
}

function shootArrow(){
  const a=document.createElement("div");
  a.className="arrow";
  a.style.left=Math.random()*window.innerWidth+"px";
  document.body.appendChild(a);
  setTimeout(()=>a.remove(),2000);
}

function update(){
  let m=Math.floor(timeLeft/60);
  let s=timeLeft%60;
  timer.textContent=(m<10?"0":"")+m+":"+(s<10?"0":"")+s;

  xp.style.width=((120-timeLeft)/120)*100+"%";

  let zoneIndex=Math.floor((120-timeLeft)/30);
  if(zoneIndex<4) zone.textContent=zones[zoneIndex];

  let biomeIndex=Math.floor((120-timeLeft)/30);
  document.body.className=biomes[biomeIndex]||"end";
  buildBiome(biomes[biomeIndex]||"end");

  if(document.body.className==="end") shootArrow();

  if(timeLeft===10) document.body.classList.add("warning");
}

function finish(){
  clearInterval(interval);
  achievement.style.display="block";
  zone.textContent="Quest Complete!";
  startBtn.style.display="none";
  pauseBtn.style.display="none";
  resetBtn.style.display="block";
}

function tick(){
  if(isPaused) return;
  timeLeft--;
  beep();
  update();
  if(timeLeft<=0) finish();
}

function start(){
  startBtn.style.display="none";
  pauseBtn.style.display="block";
  interval=setInterval(tick,1000);
}

function pause(){
  isPaused=!isPaused;
  pauseBtn.textContent=isPaused?"RESUME":"PAUSE";
}

function reset(){
  clearInterval(interval);
  timeLeft=120;
  xp.style.width="0%";
  achievement.style.display="none";
  zone.textContent="Tap Start To Begin";
  startBtn.style.display="block";
  pauseBtn.style.display="none";
  resetBtn.style.display="none";
  timer.textContent="02:00";
  isPaused=false;
  document.body.className="plains";
  buildBiome("plains");
  document.body.classList.remove("warning");
}

startBtn.addEventListener("click",start);
pauseBtn.addEventListener("click",pause);
resetBtn.addEventListener("click",reset);

buildBiome("plains");
</script>

</body>
</html>
