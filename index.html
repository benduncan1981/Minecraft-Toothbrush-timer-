<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minecraft Brushing Adventure</title>
<style>
body {
  margin: 0;
  background: black;
  overflow: hidden;
  font-family: monospace;
  color: white;
}

#game {
  display: block;
}

#ui {
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
}

#progressBar {
  height: 12px;
  background: #222;
  border: 2px solid #555;
}

#progressFill {
  height: 100%;
  width: 0%;
  background: limegreen;
}

#timer {
  margin-top: 6px;
  font-size: 16px;
}

#reward {
  position: absolute;
  inset: 0;
  background: black;
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  font-size: 22px;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui">
  <div id="progressBar"><div id="progressFill"></div></div>
  <div id="timer">2:00</div>
</div>

<div id="reward">
  <div>üèÜ Brushing Complete!</div>
  <div>You travelled all biomes!</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let totalTime = 120;
let elapsed = 0;
let speed = 2;
let worldX = 0;
let currentBiome = 0;
let sectionLength = totalTime / 4;
let running = true;

const biomes = [
  { sky:"#87CEEB", ground:"#4CAF50" },   // Plains
  { sky:"#78A7FF", ground:"#228B22" },   // Forest
  { sky:"#F4D03F", ground:"#C2B280" },   // Desert
  { sky:"#3C1E4B", ground:"#4B0082" }    // End
];

function drawSun() {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(canvas.width - 100, 100, 40, 0, Math.PI*2);
  ctx.fill();
}

function drawCloud(x,y) {
  ctx.fillStyle = "white";
  ctx.fillRect(x, y, 60, 20);
  ctx.fillRect(x+20, y-10, 60, 20);
}

function drawTree(x) {
  ctx.fillStyle = "#8B4513";
  ctx.fillRect(x, canvas.height-200, 20, 100);
  ctx.fillStyle = "green";
  ctx.fillRect(x-30, canvas.height-250, 80, 80);
}

function drawCactus(x) {
  ctx.fillStyle = "green";
  ctx.fillRect(x, canvas.height-180, 30, 120);
}

function drawEnderman(x) {
  ctx.fillStyle = "black";
  ctx.fillRect(x, canvas.height-220, 30, 120);
  ctx.fillStyle = "pink";
  ctx.fillRect(x+5, canvas.height-200, 20, 10);
}

function drawPortal() {
  ctx.fillStyle = "purple";
  ctx.fillRect(canvas.width/2 - 60, canvas.height/2 - 100, 120, 200);
}

function update() {
  if (!running) return;

  worldX += speed;
  elapsed += 1/60;

  if (Math.floor(elapsed) % 1 === 0) beep();

  let progress = (elapsed / totalTime) * 100;
  document.getElementById("progressFill").style.width = progress + "%";

  let remaining = totalTime - Math.floor(elapsed);
  let mins = Math.floor(remaining / 60);
  let secs = remaining % 60;
  document.getElementById("timer").textContent =
    mins + ":" + (secs<10?"0":"") + secs;

  currentBiome = Math.floor(elapsed / sectionLength);

  if (elapsed >= totalTime) {
    running = false;
    document.getElementById("reward").style.display = "flex";
  }
}

function beep() {
  const audio = new AudioContext();
  const osc = audio.createOscillator();
  osc.type = "square";
  osc.frequency.value = 600;
  osc.connect(audio.destination);
  osc.start();
  osc.stop(audio.currentTime + 0.05);
}

function draw() {
  let biome = biomes[currentBiome] || biomes[3];

  ctx.fillStyle = biome.sky;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  drawSun();
  drawCloud(100 - worldX*0.2,100);
  drawCloud(400 - worldX*0.2,150);

  ctx.fillStyle = biome.ground;
  ctx.fillRect(0,canvas.height-120,canvas.width,120);

  for (let i=0;i<10;i++) {
    let x = i*300 - worldX%300;
    if (currentBiome === 0) drawTree(x);
    if (currentBiome === 1) drawTree(x);
    if (currentBiome === 2) drawCactus(x);
    if (currentBiome === 3) drawEnderman(x);
  }

  if (elapsed > sectionLength && elapsed < sectionLength+3) {
    drawPortal();
  }

  requestAnimationFrame(loop);
}

function loop() {
  update();
  draw();
}

loop();
</script>

</body>
</html>
