<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Oscar's Brushing Timer</title>
<style>
  body { margin:0; font-family:sans-serif; background:#1a1a1a; color:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
  #timer { font-size:48px; margin-bottom:20px; }
  #xpBar { width:300px; height:20px; background:#333; border-radius:10px; overflow:hidden; margin-bottom:20px; }
  #xpFill { width:0%; height:100%; background:#7CFC00; transition:width 0.1s linear; }
  #hand { width:160px; height:160px; margin-bottom:20px; }
  #startBtn { padding:12px 24px; font-size:18px; border:none; border-radius:8px; background:#4CAF50; color:#fff; cursor:pointer; }
  #reward { display:none; text-align:center; margin-top:20px; }
  #reward h2 { font-size:28px; color:#FFD700; }
</style>
</head>
<body>

<div id="timer">2:00</div>
<div id="xpBar"><div id="xpFill"></div></div>
<img id="hand" src="" alt="Animated brushing hand">
<button id="startBtn">Start Brushing</button>

<div id="reward">
  <h2>ðŸŽ‰ Super Brusher! ðŸŽ‰</h2>
  <p>Well done, Oscar! Two minutes complete!</p>
  <button id="restartBtn">Brush Again</button>
</div>

<script>
// --------- Timer Setup ----------
const TOTAL_TIME = 120; // seconds
let elapsed = 0;
let running = false;
let timerInterval = null;

const timerEl = document.getElementById('timer');
const xpFill = document.getElementById('xpFill');
const startBtn = document.getElementById('startBtn');
const reward = document.getElementById('reward');
const restartBtn = document.getElementById('restartBtn');
const handImg = document.getElementById('hand');

// --------- Hand Animation ----------
let brushPhase = 0;
function makeHandSprite() {
  const c = document.createElement('canvas');
  c.width = 64; c.height = 64;
  const ctx = c.getContext('2d');
  ctx.fillStyle = '#C2A476'; ctx.fillRect(20,40,24,6); // brush handle
  ctx.fillStyle = '#fff'; ctx.fillRect(24,32,16,8);     // bristles
  ctx.fillStyle = '#F1C27D'; ctx.fillRect(10,34,16,12);  // hand
  return c.toDataURL();
}
handImg.src = makeHandSprite();

function animateHand() {
  brushPhase += 0.15;
  const sway = Math.sin(brushPhase) * 10;
  handImg.style.transform = `translateX(${sway}px)`;
  if(running) requestAnimationFrame(animateHand);
}

// --------- Timer Functions ----------
function formatTime(sec) {
  const m = Math.floor(sec / 60);
  const s = sec % 60;
  return m + ':' + (s<10?'0':'') + s;
}

function updateTimer() {
  elapsed++;
  timerEl.textContent = formatTime(TOTAL_TIME - elapsed);
  xpFill.style.width = (elapsed / TOTAL_TIME * 100) + '%';
  if(elapsed >= TOTAL_TIME) {
    clearInterval(timerInterval);
    running = false;
    reward.style.display = 'block';
  }
}

function startBrushing() {
  if(running) return;
  running = true;
  elapsed = 0;
  timerEl.textContent = formatTime(TOTAL_TIME);
  xpFill.style.width = '0%';
  reward.style.display = 'none';
  startBtn.style.display = 'none';
  timerInterval = setInterval(updateTimer, 1000);
  animateHand();
}

// --------- Button Events ----------
startBtn.addEventListener('click', startBrushing);
restartBtn.addEventListener('click', () => {
  startBtn.style.display = 'inline-block';
  reward.style.display = 'none';
});
</script>

</body>
</html>
